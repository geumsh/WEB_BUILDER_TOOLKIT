<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PublicStatus Preview</title>
    <!-- ECharts CDN -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js"></script>
    <style>
        /* === component.css (inline) === */
        #public-status-container { width: 610px; height: 324px; overflow: hidden; }
        .public-status { width: 100%; height: 100%; }
        .public-status__block {
            background-color: rgba(42, 42, 42, 0.5);
            border: 0.3px solid #778985;
            border-radius: 14.831px;
            display: flex; flex-direction: column; align-items: flex-start; justify-content: center;
            padding: 24px; position: relative; width: 100%; height: 100%;
        }
        .public-status__block::after {
            content: ''; position: absolute; inset: 0; pointer-events: none;
            border-radius: inherit; box-shadow: inset 4px 4px 4px 0px rgba(0, 0, 0, 0.06);
        }
        .public-status__group {
            display: flex; flex-direction: column; gap: 20px;
            align-items: center; justify-content: center; width: 100%; position: relative;
        }
        .public-status__header {
            display: flex; height: 38px; align-items: center;
            justify-content: space-between; width: 100%; position: relative;
        }
        .public-status__title { display: flex; gap: 9px; align-items: center; }
        .public-status__title-icon { width: 16.681px; height: 18.27px; position: relative; }
        .public-status__title-icon img { display: block; width: 100%; height: 100%; max-width: none; }
        .public-status__title-text {
            font-family: 'Pretendard', sans-serif; font-weight: 600; font-size: 18px;
            line-height: normal; color: #e9ebeb; white-space: nowrap;
        }
        .public-status__info-box {
            display: flex; gap: 18px; height: 38px; width: 183px; align-items: center;
            padding: 6px 17px; border: 0.75px solid #5e5e5e; border-radius: 12px;
            background: linear-gradient(90deg, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.3) 100%),
                        linear-gradient(90deg, rgba(59,76,70,0.1) 0%, rgba(59,76,70,0.1) 100%),
                        linear-gradient(90deg, rgb(22,36,32) 0%, rgb(22,36,32) 100%);
            position: relative;
        }
        .public-status__info-label {
            font-family: 'Pretendard', sans-serif; font-weight: 500; font-size: 16px;
            line-height: normal; color: #f2f9ef; text-align: center; width: 56px; white-space: nowrap;
        }
        .public-status__info-divider { display: flex; width: 0; height: 20px; align-items: center; justify-content: center; position: relative; }
        .public-status__info-divider-inner { transform: rotate(90deg); }
        .public-status__info-divider-line { width: 20px; height: 0; position: relative; }
        .public-status__info-divider-line img { display: block; width: 100%; height: 1px; max-width: none; }
        .public-status__info-item {
            display: flex; gap: 5px; align-items: center; justify-content: flex-end;
            flex: 1; min-width: 1px; min-height: 1px;
            font-family: 'Pretendard', sans-serif; font-weight: 500; line-height: normal; white-space: nowrap;
        }
        .public-status__info-value { font-size: 18px; color: #5bdcc6; text-align: right; }
        .public-status__info-unit { font-size: 16px; color: #9c9c9c; text-align: center; }
        .public-status__content-box {
            display: flex; flex-direction: column; gap: 18px; align-items: center; width: 100%; position: relative;
        }
        .public-status__chart-container { width: 100%; height: 190px; }
        .public-status__legend { display: flex; gap: 10px; align-items: center; }
        .public-status__legend-item {
            display: flex; flex-direction: column; width: 53.167px; height: 22px;
            align-items: center; justify-content: center; padding: 4.583px 11px;
            background-color: rgba(255,255,255,0.05); border: 0.688px solid rgba(255,255,255,0.3);
            border-radius: 18.333px;
        }
        .public-status__legend-content { display: flex; gap: 3.667px; align-items: center; }
        .public-status__legend-line { width: 9.167px; height: 1.833px; }
        .public-status__legend-line--yesterday { background-color: #038c8c; }
        .public-status__legend-line--today { background-color: #5bdcc6; }
        .public-status__legend-text {
            font-family: 'Pretendard', sans-serif; font-weight: 600; font-size: 12px;
            line-height: normal; color: white; white-space: nowrap;
        }

        /* === preview-specific === */
        /* Reset & Base */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #1a1a1a;
            padding: 32px;
        }
    </style>
</head>
<body>
    <div id="public-status-container">
        <div class="public-status">
            <div class="public-status__block">
                <div class="public-status__group">
                    <!-- Header -->
                    <div class="public-status__header">
                        <!-- Title -->
                        <div class="public-status__title">
                            <div class="public-status__title-icon">
                                <img src="assets/title-icon.svg" alt="">
                            </div>
                            <span class="public-status__title-text">Public 현황</span>
                        </div>

                        <!-- Info Box -->
                        <div class="public-status__info-box">
                            <span class="public-status__info-label">금일건수</span>
                            <div class="public-status__info-divider">
                                <div class="public-status__info-divider-inner">
                                    <div class="public-status__info-divider-line">
                                        <img src="assets/divider-line.svg" alt="">
                                    </div>
                                </div>
                            </div>
                            <div class="public-status__info-item">
                                <span class="public-status__info-value">-</span>
                                <span class="public-status__info-unit">건</span>
                            </div>
                        </div>
                    </div>

                    <!-- Content Box -->
                    <div class="public-status__content-box">
                        <!-- Chart Container (ECharts) -->
                        <div class="public-status__chart-container"></div>

                        <!-- Legend -->
                        <div class="public-status__legend">
                            <div class="public-status__legend-item">
                                <div class="public-status__legend-content">
                                    <div class="public-status__legend-line public-status__legend-line--yesterday"></div>
                                    <span class="public-status__legend-text">전일</span>
                                </div>
                            </div>
                            <div class="public-status__legend-item">
                                <div class="public-status__legend-content">
                                    <div class="public-status__legend-line public-status__legend-line--today"></div>
                                    <span class="public-status__legend-text">금일</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mock Data -->
    <script>
        const MOCK_DATA = {
            TBD_publicStatus: {
                success: true,
                data: {
                    TBD_todayCount: 248,
                    TBD_timestamps: ['08:00', '09:00', '10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00'],
                    TBD_yesterday: [150, 280, 350, 420, 380, 450, 520, 480, 400],
                    TBD_today: [120, 220, 380, 480, 520, 580, 620, 275, 200]
                }
            }
        };
    </script>

    <!-- Preview Render -->
    <script>
        const container = document.getElementById('public-status-container');
        const chartContainer = container.querySelector('.public-status__chart-container');
        const todayCountEl = container.querySelector('.public-status__info-value');

        // Initialize ECharts
        const chartInstance = echarts.init(chartContainer);

        // Render function
        function renderPreview(data) {
            // Render today count
            if (todayCountEl) {
                todayCountEl.textContent = data.TBD_todayCount.toLocaleString();
            }

            // Render chart
            const option = {
                grid: {
                    left: 40,
                    right: 10,
                    top: 10,
                    bottom: 30,
                    containLabel: false
                },
                xAxis: {
                    type: 'category',
                    data: data.TBD_timestamps,
                    axisLine: { show: false },
                    axisTick: { show: false },
                    axisLabel: {
                        color: 'rgba(255, 255, 255, 0.5)',
                        fontSize: 13,
                        fontFamily: 'Pretendard, sans-serif'
                    },
                    splitLine: { show: false }
                },
                yAxis: {
                    type: 'value',
                    min: 0,
                    max: 800,
                    interval: 200,
                    axisLine: { show: false },
                    axisTick: { show: false },
                    axisLabel: {
                        color: 'rgba(255, 255, 255, 0.5)',
                        fontSize: 13,
                        fontFamily: 'Pretendard, sans-serif'
                    },
                    splitLine: {
                        show: true,
                        lineStyle: {
                            color: 'rgba(255, 255, 255, 0.1)',
                            type: 'dashed'
                        }
                    }
                },
                tooltip: {
                    trigger: 'axis',
                    backgroundColor: 'rgba(0, 145, 120, 0.2)',
                    borderColor: 'transparent',
                    textStyle: {
                        color: '#fff',
                        fontSize: 15,
                        fontWeight: 600,
                        fontFamily: 'Pretendard, sans-serif'
                    },
                    axisPointer: {
                        type: 'line',
                        lineStyle: {
                            color: 'rgba(0, 145, 120, 0.5)',
                            width: 2.5
                        }
                    }
                },
                series: [
                    {
                        name: '전일',
                        type: 'line',
                        data: data.TBD_yesterday,
                        smooth: true,
                        symbol: 'none',
                        lineStyle: { color: '#038c8c', width: 2 },
                        itemStyle: { color: '#038c8c' },
                        areaStyle: { color: '#038c8c', opacity: 0.3 }
                    },
                    {
                        name: '금일',
                        type: 'line',
                        data: data.TBD_today,
                        smooth: true,
                        symbol: 'none',
                        lineStyle: { color: '#5bdcc6', width: 2 },
                        itemStyle: { color: '#5bdcc6' },
                        areaStyle: { color: '#5bdcc6', opacity: 0.3 }
                    }
                ]
            };

            chartInstance.setOption(option);
            console.log('[Preview] Rendered:', data);
        }

        // Initial render
        renderPreview(MOCK_DATA.TBD_publicStatus.data);

        // Resize handler
        window.addEventListener('resize', () => {
            chartInstance.resize();
        });
    </script>
</body>
</html>
