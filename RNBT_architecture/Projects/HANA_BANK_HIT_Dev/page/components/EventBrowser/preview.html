<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EventBrowser - Preview</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css">
    <link href="https://unpkg.com/tabulator-tables@6.3.0/dist/css/tabulator.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables@6.3.0/dist/js/tabulator.min.js"></script>
    <style>
        /* === component.css (inline) === */
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');

        /* ==========================================================================
           Event Browser Component (Tabulator)
           Figma Node ID: 622:51490
           ========================================================================== */

        /* ==========================================================================
           Container
           ========================================================================== */
        .event-browser {
            position: relative;
            width: 100%;
            height: 100%;
            min-height: 220px;
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif;
            display: flex;
            flex-direction: column;
            padding: 14px 34px 22px 27px;
        }

        .event-browser__bg {
            position: absolute;
            inset: 0;
            background: linear-gradient(to bottom, rgba(32, 44, 40, 0.8), rgba(8, 33, 25, 0.8));
            border: 1px solid #4d634e;
            border-radius: 24px;
            backdrop-filter: blur(2px);
            z-index: 0;
        }

        /* ==========================================================================
           Header
           ========================================================================== */
        .event-browser__header {
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: relative;
            z-index: 1;
        }

        .header__title {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .title__text {
            font-weight: 600;
            font-size: 18px;
            color: #f2f9ef;
            white-space: nowrap;
            margin: 0;
        }

        .title__action {
            display: flex;
            align-items: center;
            gap: 18px;
        }

        /* Arrow Buttons */
        .action__arrow {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .arrow__btn {
            position: relative;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .arrow__btn-inner {
            position: absolute;
            inset: -12.5%;
        }

        .arrow__btn-inner img {
            display: block;
            width: 100%;
            height: 100%;
        }

        /* Event Buttons */
        .action__event {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 72px;
            height: 24px;
            padding: 7px 19px;
            border-radius: 4px;
            cursor: pointer;
        }

        .btn p {
            font-weight: 500;
            font-size: 13px;
            text-align: center;
            white-space: nowrap;
            margin: 0;
        }

        .btn--reset {
            background: linear-gradient(to bottom, rgba(215, 237, 230, 0.2) 9.46%, rgba(215, 237, 230, 0) 81.081%);
            border: 0.5px solid #6c726e;
        }

        .btn--reset p {
            color: #f2f9ef;
        }

        .btn--delete {
            background: linear-gradient(to bottom, rgba(0, 145, 120, 0.3) 9.46%, rgba(0, 145, 120, 0) 81.081%);
            border: 0.5px solid #009178;
            padding: 7px 24px;
        }

        .btn--delete p {
            color: #00c8a5;
        }

        /* ==========================================================================
           Status Group (Header)
           ========================================================================== */
        .header__status-group {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .status-level {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100px;
            height: 28px;
            padding: 6px 11px;
            border-radius: 8px;
            background: linear-gradient(to right, #29282b, #29282b);
            box-shadow: 0px 0px 4px 0px rgba(0, 0, 0, 0.25), 0px 0px 2px 0px black;
        }

        .status-level--critical {
            border-left: 1px solid #f53132;
            background-image: url("data:image/svg+xml;utf8,<svg viewBox='0 0 100 28' xmlns='http://www.w3.org/2000/svg' preserveAspectRatio='none'><rect x='0' y='0' height='100%' width='100%' fill='url(%23grad)' opacity='0.7'/><defs><radialGradient id='grad' gradientUnits='userSpaceOnUse' cx='0' cy='0' r='10' gradientTransform='matrix(-5.2339e-7 0.65625 -5.066 -0.000024253 50 30.188)'><stop stop-color='rgba(245,49,50,1)' offset='0'/><stop stop-color='rgba(245,49,50,0)' offset='1'/></radialGradient></defs></svg>");
        }

        .status-level--warning {
            border-left: 1px solid #fd8002;
            background-image: url("data:image/svg+xml;utf8,<svg viewBox='0 0 100 28' xmlns='http://www.w3.org/2000/svg' preserveAspectRatio='none'><rect x='0' y='0' height='100%' width='100%' fill='url(%23grad)' opacity='0.7'/><defs><radialGradient id='grad' gradientUnits='userSpaceOnUse' cx='0' cy='0' r='10' gradientTransform='matrix(-5.2339e-7 0.65625 -5.066 -0.000024253 50 30.188)'><stop stop-color='rgba(253,128,2,1)' offset='0'/><stop stop-color='rgba(253,128,2,0)' offset='1'/></radialGradient></defs></svg>");
        }

        .status-level--caution {
            border-left: 1px solid #fdd01f;
            background-image: url("data:image/svg+xml;utf8,<svg viewBox='0 0 100 28' xmlns='http://www.w3.org/2000/svg' preserveAspectRatio='none'><rect x='0' y='0' height='100%' width='100%' fill='url(%23grad)' opacity='0.7'/><defs><radialGradient id='grad' gradientUnits='userSpaceOnUse' cx='0' cy='0' r='10' gradientTransform='matrix(-5.2339e-7 0.65625 -5.066 -0.000024253 50 30.188)'><stop stop-color='rgba(253,208,31,1)' offset='0'/><stop stop-color='rgba(253,208,31,0)' offset='1'/></radialGradient></defs></svg>");
        }

        .status-level--normal {
            border-left: 1px solid #32d28c;
            background-image: url("data:image/svg+xml;utf8,<svg viewBox='0 0 100 28' xmlns='http://www.w3.org/2000/svg' preserveAspectRatio='none'><rect x='0' y='0' height='100%' width='100%' fill='url(%23grad)' opacity='0.7'/><defs><radialGradient id='grad' gradientUnits='userSpaceOnUse' cx='0' cy='0' r='10' gradientTransform='matrix(-5.2339e-7 0.65625 -5.066 -0.000024253 50 30.188)'><stop stop-color='rgba(50,210,140,1)' offset='0'/><stop stop-color='rgba(50,210,140,0)' offset='1'/></radialGradient></defs></svg>");
        }

        .status-level__block {
            display: flex;
            align-items: center;
            width: 100%;
        }

        .status-level__box {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-level__group {
            display: flex;
            align-items: center;
            gap: 6px;
            width: 38px;
        }

        .status-level__item {
            position: relative;
            width: 10px;
            height: 10px;
        }

        .status-level__item img {
            display: block;
            width: 100%;
            height: 100%;
        }

        .status-level__item-stroke {
            position: absolute;
            inset: 0;
            border-radius: 6px;
            opacity: 0.85;
        }

        .status-level__item-stroke--red {
            border: 0.25px solid #e30909;
        }

        .status-level__item-stroke--orange {
            border: 0.25px solid #e35d09;
        }

        .status-level__item-stroke--yellow {
            border: 0.25px solid #e3dc09;
        }

        .status-level__item-stroke--green {
            border: 0.25px solid #0ddf83;
        }

        .status-level__label {
            font-weight: 500;
            font-size: 13px;
            color: #f2f9ef;
            text-align: right;
            letter-spacing: -0.52px;
            white-space: nowrap;
            margin: 0;
        }

        .status-level__divider {
            width: 1px;
            height: 10px;
        }

        .status-level__divider--red {
            background-color: #f53132;
        }

        .status-level__divider--orange {
            background-color: #fd7f04;
        }

        .status-level__divider--yellow {
            background-color: #fdd01f;
        }

        .status-level__divider--green {
            background-color: #32d28c;
        }

        .status-level__count {
            flex: 1;
            font-weight: 500;
            font-size: 14px;
            color: #f2f9ef;
            text-align: right;
            letter-spacing: -0.56px;
            margin: 0;
        }

        /* ==========================================================================
           Table Container (Tabulator)
           ========================================================================== */
        .table-container {
            flex: 1;
            margin-top: 14px;
            min-height: 0;
            position: relative;
            z-index: 1;
        }

        /* ==========================================================================
           Tabulator Custom Theme
           ========================================================================== */

        /* 테이블 전체 */
        .event-browser .tabulator {
            background: transparent;
            border: none;
            font-family: 'Pretendard', sans-serif;
            font-size: 13px;
        }

        /* 헤더 영역 */
        .event-browser .tabulator .tabulator-header {
            background: transparent;
            border-bottom: none;
            gap: 4px;
        }

        .event-browser .tabulator .tabulator-header .tabulator-col {
            background: linear-gradient(to bottom, rgba(77, 99, 78, 0.1) 27.439%, rgba(0, 145, 120, 0.2) 100%),
                        linear-gradient(90deg, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0.2) 100%) !important;
            border: 0.75px solid #009178 !important;
            border-radius: 8px;
        }

        .event-browser .tabulator .tabulator-header .tabulator-col-content {
            padding: 10px 30px;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
        }

        .event-browser .tabulator .tabulator-header .tabulator-col-title {
            font-weight: 500;
            font-size: 14px;
            color: #e4e4e4;
            text-align: center;
            white-space: nowrap;
        }

        /* 정렬 아이콘 숨김 */
        .event-browser .tabulator .tabulator-header .tabulator-col .tabulator-col-sorter {
            display: none;
        }

        /* 테이블 바디 */
        .event-browser .tabulator .tabulator-tableholder {
            background: transparent;
        }

        .event-browser .tabulator .tabulator-table {
            background: transparent;
        }

        /* 행 스타일 */
        .event-browser .tabulator .tabulator-row {
            background: transparent !important;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            min-height: 36px;
        }

        .event-browser .tabulator .tabulator-row:hover {
            background: rgba(0, 145, 120, 0.1) !important;
        }

        .event-browser .tabulator .tabulator-row.tabulator-selected {
            background: rgba(0, 145, 120, 0.3) !important;
        }

        /* 셀 스타일 */
        .event-browser .tabulator .tabulator-cell {
            border-right: none;
            padding: 10px 30px;
            font-weight: 500;
            font-size: 13px;
            color: #e4e4e4;
        }

        /* 등급 셀 */
        .event-browser .tabulator .tabulator-cell.grade-cell {
            padding: 10px 2px 10px 0;
            text-align: center;
        }

        .event-browser .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .event-browser .status-indicator__icon {
            position: relative;
            width: 10px;
            height: 10px;
        }

        .event-browser .status-indicator__icon img {
            display: block;
            width: 100%;
            height: 100%;
        }

        .event-browser .status-indicator__icon--critical {
            box-shadow: 0px 0px 1.2px 0px rgba(171, 35, 60, 0.37);
        }

        .event-browser .status-indicator__icon--warning {
            box-shadow: 0px 0px 1.2px 0px rgba(171, 95, 35, 0.37);
        }

        .event-browser .status-indicator__icon--caution {
            box-shadow: 0px 0px 1.2px 0px rgba(171, 112, 35, 0.37);
        }

        .event-browser .status-indicator__icon--normal {
            box-shadow: 0px 0px 1.2px 0px rgba(29, 199, 188, 0.37);
        }

        .event-browser .status-indicator__stroke {
            position: absolute;
            inset: 0;
            border-radius: 6px;
            opacity: 0.85;
        }

        .event-browser .status-indicator__stroke--critical {
            border: 0.25px solid #f71d45;
        }

        .event-browser .status-indicator__stroke--warning {
            border: 0.25px solid #fd8002;
        }

        .event-browser .status-indicator__stroke--caution {
            border: 0.25px solid #f7ba1d;
        }

        .event-browser .status-indicator__stroke--normal {
            border: 0.25px solid #14baff;
        }

        .event-browser .status-indicator__label {
            font-weight: 500;
            font-size: 13px;
            color: #e4e4e4;
            white-space: nowrap;
        }

        .event-browser .status-indicator__label--normal {
            color: #eff9f6;
        }

        /* placeholder */
        .event-browser .tabulator .tabulator-placeholder {
            color: #778985;
            font-size: 14px;
        }
    </style>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #1a1a1a;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            font-family: 'Pretendard', sans-serif;
        }

        /* Container: Figma 선택 요소 크기 */
        #component-container {
            width: 1860px;
            height: 220px;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <div id="component-container">
        <div class="event-browser">
            <!-- Background -->
            <div class="event-browser__bg"></div>

            <!-- Header -->
            <div class="event-browser__header">
                <div class="header__title">
                    <p class="title__text">이벤트 현황</p>
                    <div class="title__action">
                        <div class="action__arrow">
                            <div class="arrow__btn" data-action="scroll-up">
                                <div class="arrow__btn-inner">
                                    <img src="assets/6cc517ada307999e2d0560ca1f10cea477c2fde0.svg" alt="Arrow Up">
                                </div>
                            </div>
                            <div class="arrow__btn" data-action="scroll-down">
                                <div class="arrow__btn-inner">
                                    <img src="assets/bb538a3e75a6454282f384375a3fbae872392721.svg" alt="Arrow Down">
                                </div>
                            </div>
                        </div>
                        <div class="action__event">
                            <div class="btn btn--reset" data-action="reset">
                                <p>초기화</p>
                            </div>
                            <div class="btn btn--delete" data-action="delete">
                                <p>삭제</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="header__status-group">
                    <!-- 심각 -->
                    <div class="status-level status-level--critical">
                        <div class="status-level__block">
                            <div class="status-level__box">
                                <div class="status-level__group">
                                    <div class="status-level__item">
                                        <img src="assets/9491f7f5c0e7ec9638ec295f58081828dca1dad7.svg" alt="">
                                        <div class="status-level__item-stroke status-level__item-stroke--red"></div>
                                    </div>
                                    <p class="status-level__label">심각</p>
                                </div>
                                <div class="status-level__divider status-level__divider--red"></div>
                            </div>
                            <p class="status-level__count" data-bind="criticalCount">23</p>
                        </div>
                    </div>
                    <!-- 경계 -->
                    <div class="status-level status-level--warning">
                        <div class="status-level__block">
                            <div class="status-level__box">
                                <div class="status-level__group">
                                    <div class="status-level__item">
                                        <img src="assets/d094ff97df0fafdaaa3f19423c856ac8f7dfd07c.svg" alt="">
                                        <div class="status-level__item-stroke status-level__item-stroke--orange"></div>
                                    </div>
                                    <p class="status-level__label">경계</p>
                                </div>
                                <div class="status-level__divider status-level__divider--orange"></div>
                            </div>
                            <p class="status-level__count" data-bind="warningCount">10</p>
                        </div>
                    </div>
                    <!-- 주의 -->
                    <div class="status-level status-level--caution">
                        <div class="status-level__block">
                            <div class="status-level__box">
                                <div class="status-level__group">
                                    <div class="status-level__item">
                                        <img src="assets/c1f8d66da4c26d0f8b2fa61046dc17902ebadb5a.svg" alt="">
                                        <div class="status-level__item-stroke status-level__item-stroke--yellow"></div>
                                    </div>
                                    <p class="status-level__label">주의</p>
                                </div>
                                <div class="status-level__divider status-level__divider--yellow"></div>
                            </div>
                            <p class="status-level__count" data-bind="cautionCount">8</p>
                        </div>
                    </div>
                    <!-- 정상 -->
                    <div class="status-level status-level--normal">
                        <div class="status-level__block">
                            <div class="status-level__box">
                                <div class="status-level__group">
                                    <div class="status-level__item">
                                        <img src="assets/1f332532db55375471ebaad15f30381180f2aba1.svg" alt="">
                                        <div class="status-level__item-stroke status-level__item-stroke--green"></div>
                                    </div>
                                    <p class="status-level__label">정상</p>
                                </div>
                                <div class="status-level__divider status-level__divider--green"></div>
                            </div>
                            <p class="status-level__count" data-bind="normalCount">216</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Table Container (Tabulator) -->
            <div class="table-container" id="tabulator-table"></div>
        </div>
    </div>

    <script src="../../../../../Utils/fx.js"></script>
    <script>

        // ======================
        // Mock 데이터
        // ======================
        const mockData = {
            summary: {
                critical: 23,
                warning: 10,
                caution: 8,
                normal: 216
            },
            items: [
                { grade: 'critical', group: 'item', name: 'item', hostname: 'item', time: '2025-00-00 00:00:00', solution: 'item', area: 'item', content: 'contents txt' },
                { grade: 'caution', group: 'item', name: 'item', hostname: 'item', time: '2025-00-00 00:00:00', solution: 'item', area: 'item', content: 'contents txt' },
                { grade: 'normal', group: 'item', name: 'item', hostname: 'item', time: '2025-00-00 00:00:00', solution: 'item', area: 'item', content: 'contents txt' },
                { grade: 'normal', group: 'item', name: 'item', hostname: 'item', time: '2025-00-00 00:00:00', solution: 'item', area: 'item', content: 'contents txt' }
            ]
        };

        // ======================
        // Config
        // ======================
        const config = {
            gradeIcons: {
                critical: 'assets/515557f12424948eecae944a5fe423532f290941.svg',
                warning: 'assets/d094ff97df0fafdaaa3f19423c856ac8f7dfd07c.svg',
                caution: 'assets/c1f8d66da4c26d0f8b2fa61046dc17902ebadb5a.svg',
                normal: 'assets/a24ee710d5a2b3f82ab15ab24e3839f1c03bf037.svg'
            },
            gradeLabels: {
                critical: '심각',
                warning: '경계',
                caution: '주의',
                normal: '정상'
            }
        };

        // ======================
        // 보조 함수 (순수 함수)
        // ======================

        // 등급별 아이콘 HTML 생성
        const createGradeIndicator = (gradeIcons, gradeLabels) => (grade) => {
            const icon = gradeIcons[grade] || gradeIcons.normal;
            const label = gradeLabels[grade] || '정상';
            const labelClass = grade === 'normal' ? 'status-indicator__label--normal' : '';

            return `
                <div class="status-indicator">
                    <div class="status-indicator__icon status-indicator__icon--${grade}">
                        <img src="${icon}" alt="">
                        <div class="status-indicator__stroke status-indicator__stroke--${grade}"></div>
                    </div>
                    <span class="status-indicator__label ${labelClass}">${label}</span>
                </div>
            `;
        };

        const gradeFormatter = createGradeIndicator(config.gradeIcons, config.gradeLabels);

        // ======================
        // Tabulator 초기화
        // ======================
        document.addEventListener('DOMContentLoaded', () => {
            const table = new Tabulator('#tabulator-table', {
                data: mockData.items,
                layout: 'fitColumns',
                height: '100%',
                rowHeight: 36,
                placeholder: '데이터가 없습니다',
                headerSort: true,
                selectable: true,
                columns: [
                    {
                        title: '등급',
                        field: 'grade',
                        width: 122,
                        hozAlign: 'center',
                        headerHozAlign: 'center',
                        formatter: function(cell) {
                            const value = cell.getValue();
                            cell.getElement().classList.add('grade-cell');
                            return gradeFormatter(value);
                        }
                    },
                    {
                        title: '업무그룹',
                        field: 'group',
                        width: 135,
                        hozAlign: 'center',
                        headerHozAlign: 'center'
                    },
                    {
                        title: '업무명',
                        field: 'name',
                        width: 135,
                        hozAlign: 'center',
                        headerHozAlign: 'center'
                    },
                    {
                        title: '호스트명',
                        field: 'hostname',
                        width: 135,
                        hozAlign: 'center',
                        headerHozAlign: 'center'
                    },
                    {
                        title: '발생시간',
                        field: 'time',
                        width: 165,
                        hozAlign: 'center',
                        headerHozAlign: 'center'
                    },
                    {
                        title: '솔루션',
                        field: 'solution',
                        width: 135,
                        hozAlign: 'center',
                        headerHozAlign: 'center'
                    },
                    {
                        title: '영역',
                        field: 'area',
                        width: 135,
                        hozAlign: 'center',
                        headerHozAlign: 'center'
                    },
                    {
                        title: '내용',
                        field: 'content',
                        hozAlign: 'left',
                        headerHozAlign: 'center'
                    }
                ],
                rowClick: function(e, row) {
                    console.log('[EventBrowser] Row clicked:', row.getData());
                }
            });

            // 버튼 이벤트 바인딩
            go(
                document.querySelectorAll('[data-action]'),
                each(btn => btn.addEventListener('click', () => {
                    const action = btn.dataset.action;
                    console.log(`[EventBrowser] Action: ${action}`);
                }))
            );
        });
    </script>
</body>
</html>
